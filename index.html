<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Výkaz práce</title>
    <link rel="stylesheet" href="style.css" />

    <!-- Knihovny, na které app.js spoléhá (načtou se dřív díky pořadí) -->
    <script defer src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/exceljs@4.4.0/dist/exceljs.min.js"></script>

    <!-- Supabase UMD build => k dispozici window.supabase.createClient(...) -->
    <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>

    <!-- Fallback (kdyby CDN blokovalo CSP/adblock) – nahráje se jen když supabase chybí -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        if (!window.supabase) {
          const s = document.createElement('script');
          s.src = 'https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.js';
          document.head.appendChild(s);
        }
      });
    </script>
  </head>

  <body>
    <header class="topbar">
      <h1>Výkaz práce</h1>
    </header>

    <main id="app" class="wrap"></main>

    <div id="err" class="toast" style="display:none"></div>

    <!-- FAB pro boční panel -->
    <button id="openDrawerBtn" class="fab" aria-label="Otevřít nástroje">+</button>

    <!-- Overlay + Drawer -->
    <div id="drawerOverlay" aria-hidden="true"></div>

    <aside
      id="toolsDrawer"
      class="drawer"
      role="dialog"
      aria-label="Nástroje"
      aria-hidden="true">

      <header class="drawer-head">
        <h3>Nástroje</h3>
        <button id="drawerCloseBtn" class="icon-btn" aria-label="Zavřít">×</button>
      </header>

      <section class="drawer-sec">
        <h4>Přidání zakázky</h4>
        <label class="sr-only" for="newJobClient">Klient</label>
        <select id="newJobClient" class="pill-select"></select>

        <label class="sr-only" for="newJobName">Název zakázky</label>
        <input id="newJobName" class="pill-input" placeholder="Název zakázky" />

        <label class="sr-only" for="newJobStatus">Stav</label>
        <select id="newJobStatus" class="pill-select"></select>

        <button id="addJobBtn" class="pill-btn accent" style="margin-top:12px;">
          Přidat zakázku
        </button>
      </section>

      <section class="drawer-sec">
        <h4>Přidání klienta</h4>
        <label class="sr-only" for="newClientName">Název klienta</label>
        <input id="newClientName" class="pill-input" placeholder="Název klienta" />
        <button id="addClientBtn" class="pill-btn" style="margin-top:12px;">
          Přidat klienta
        </button>
      </section>

      <section class="drawer-sec">
        <h4>Účet</h4>
        <button id="logoutBtn" class="pill-btn">Odhlásit</button>
      </section>
    </aside>

    <!-- Až po knihovnách -->
    <script src="app.js"></script>
    <script src="drawer.js"></script>
  </body>
</html>
